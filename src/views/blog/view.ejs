<%- include('../partials/header', { title: blog.title }) %>

<div class="container blog-container">
  <article class="blog-article">
    <header class="blog-header">
      <h1 class="blog-title"><%= blog.title %></h1>
      <div class="blog-meta">
        <% if (blog.author) { %>
          <span class="author">By <%= blog.author.username %></span>
        <% } %>
        <time class="publish-date">
          <%= new Date(blog.createdAt).toLocaleDateString('en-US', { 
            year: 'numeric', 
            month: 'long', 
            day: 'numeric' 
          }) %>
        </time>
      </div>
    </header>

    <% if (blog.image) { %>
      <figure class="blog-image">
        <img src="<%= blog.image %>" alt="<%= blog.title %>" class="img-responsive">
        <figcaption class="image-caption">Featured Image</figcaption>
      </figure>
    <% } %>

    <section class="blog-content ql-editor">
      <%- blog.description %>
    </section>

    <footer class="blog-actions">
      <a href="/blogs/<%= blog._id %>/edit" class="btn btn-edit">
        <i class="fas fa-edit"></i> Edit
      </a>
      <form action="/blogs/<%= blog._id %>?_method=DELETE" method="POST" class="d-inline">
        <button type="submit" class="btn btn-delete" 
                onclick="return confirm('Permanently delete this blog?')">
          <i class="fas fa-trash"></i> Delete
        </button>
      </form>
      <a href="/blogs" class="btn btn-back">
        <i class="fas fa-arrow-left"></i> Back to Blogs
      </a>
    </footer>
  </article>
</div>

<%- include('../partials/footer') %>