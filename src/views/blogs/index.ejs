<%- include("../partials/header.ejs") %>

<h1>All Blogs</h1>
<a href="/blogs/new">Create New Blog</a>

<ul>
  <% blogs.forEach(blog => { %>
    <li>
      <h2><a href="/blogs/<%= blog._id %>"><%= blog.title %></a></h2>
      
      <% if (blog.description) { %>
        <p><%= blog.description.length > 100 ? blog.description.substring(0, 100) + '...' : blog.description %></p>
      <% } else { %>
        <p>No description available.</p>
      <% } %>
      
      <a href="/blogs/edit/<%= blog._id %>">Edit</a> | 
      <form action="/blogs/delete/<%= blog._id %>" method="POST" style="display:inline;">
        <button type="submit">Delete</button>
      </form>
    </li>
  <% }); %>
</ul>

<%- include("../partials/footer.ejs") %>
